# 复古俄罗斯方块 · 手感版（离线可运行）

这是一份**手感优先**、可长期游玩的 Web 俄罗斯方块实现：  
- 棋盘渲染使用 Canvas（性能）  
- 分数/等级/消行/连击使用 DOM（清晰）  
- 7-bag、防脸黑  
- SRS-ish 旋转 + wall kick  
- Lock Delay（可调整，但防无限拖）  
- 清行反馈：短促闪光 + 扫描条（克制但不干巴）  
- 画面做了 DPR 适配与像素对齐，避免“糊/马赛克”

## 运行方式

1. 解压 zip  
2. 直接双击 `index.html` 即可游玩  
- 不需要 npm  
- 不需要本地服务器  
- 无外部依赖  

## 操作

- ← / →：移动（DAS / ARR）
- ↓：软降
- 空格：硬降
- Z：逆时针旋转
- X / ↑：顺时针旋转
- P：暂停/继续
- R：重开
- M：开关音效（也可点右上角按钮）

## 计分规则

- **只有消行才计分**：每消除 **1 行 = 10 分**
- 不计算软降/硬降分

## 手感参数（集中配置）

打开 `game.js`，修改 `TetrisConfig`：

- `DAS_MS`：左右长按的初始延迟（推荐 120~160）
- `ARR_MS`：长按后的重复移动间隔（推荐 20~40；0=每帧移动）
- `LOCK_DELAY_MS`：触底后可调整时间（推荐 400~550）
- `LOCK_RESET_LIMIT`：触底后允许重置次数（防无限拖）
- `SOFT_DROP_MULT`：软降加速倍率
- `LINE_CLEAR_MS`：清行反馈时长（短、明确）

## 文件说明

- `index.html`：全中文界面结构（棋盘 + 右侧信息与预览）
- `style.css`：克制复古风 UI（高对比但不刺眼）
- `game.js`：规则核心（7-bag、旋转/kick、锁定、计分、等级/速度、清行时序）
- `input.js`：输入系统（即时响应 + DAS/ARR，忽略系统 repeat）
- `audio.js`：复古 WebAudio 音效（低音量，可关闭）
- `main.js`：渲染与主循环（DPR 适配、sprite 缓存、更流畅）

如果你还想更“硬核耐玩”，下一步可加：
- Hold
- Back-to-Back（B2B）
- T-Spin 判定与计分（依然保持“克制”反馈）


## 手机端适配 & 全屏

- 手机上会自动显示“触控按键”（左/右/旋转/软降/硬降）
- 点击右上角 **“全屏”** 可进入/退出全屏（部分浏览器会提示确认）

## 音乐开关（支持你自备 mp3）

已加入 **“音乐：开/关”** 按键（默认关闭）。  
你可以把自己的 mp3 放到这个目录：

- `assets/audio/bgm.mp3`  （推荐用这个名字）

然后点击“音乐：开”即可播放（循环、低音量）。  
> 说明：iOS/部分浏览器要求“用户点击”后才能开始播放音乐，所以默认不会自动播。

## 软降速度调整

软降已调慢（更好控）。参数在 `game.js -> TetrisConfig`：

- `SOFT_DROP_MULT`：数值越大越快，越小越慢（当前为 10）

